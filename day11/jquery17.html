<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        var cnt = 0;
        var mx, my;
        var timer;
        //버튼 누르면 box1의 글자 색을 red 배경 초록색 너비 200 높이 200 지정 css() json사용
        $(document).ready(function(){
            $("input[type='button']").on("click", function(e){
                if(e.target.value == "btn1"){
                    $("#box1").css({
                        // "color":"red",
                        // "width":"200px",
                        // "height":"200px",
                        // "background":"green"
                    });
                    clearInterval(timer);
                } else if(e.target.value == "btn2"){
                    // moveImage();
                    startMove();
                }
            });
            window.addEventListener("mousemove", mouseMoveHandler);
            
        });
        
        function mouseMoveHandler(e){
            // mx = e.pageX;
            mx = 0;
            my = e.pageY;
        }

        function update(){
            moveImage();
        }

        var pos = 0;
        var flag = 0;
        function moveImage(){
            cnt++;
            // console.log($("#img1").css("marginLeft"));
            // console.log(document.body.clientWidth-mx);
            // console.log(-document.body.clientHeight+my);
            // console.log(cnt);
            
            // if($("img1").css("marginLeft")>document.body.clientWidth){
            //     $("img1").css("marginLeft", document.body.clientWidth-mx-pos);
            // }else{
            //     $("img1").css("marginLeft", document.body.clientWidth-mx+pos);
            // }

            console.log(document.body.clientWidth);
            
                if(pos >= 500 ){
                    flag = 1;
                }else if(pos <= 0){
                    flag = 0;
                }
            
                // pos += 10;
                if(flag == 1){
                    pos -= 10;
                }else{
                    pos += 10;
                }
           
                // pos = 0-(document.body.clientWidth-mx);
            //     pos -= 10;
            // }else{
            console.log(pos);

            $("#img1").css("marginLeft", pos);
            // $("#img1").css("marginTop", -document.body.clientHeight+my);
            // $("#img1").css("marginLeft", pos+"px");
            if(cnt % 2 == 1){
                $("#img1").attr("src", "https://media2.giphy.com/media/EjMjZMMfffKb6/source.gif");
            } else{
                $("#img1").attr("src", "https://media1.giphy.com/media/qQWufo6HvuGtO/giphy.gif");
            }
        }

        function startMove(){
            timer = setInterval(() => {
                update();
            }, 100);
        }

    </script>
</head>
<body>
    <input type="button" value="btn1">
    <input type="button" value="btn2">
    <div id="box1">
        토끼이미지
    </div>
    <div>
        <img src="https://media1.giphy.com/media/qQWufo6HvuGtO/giphy.gif" alt="" id="img1">
    </div>
</body>
</html>